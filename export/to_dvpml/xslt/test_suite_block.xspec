<?xml version="1.0" encoding="UTF-8"?>
<x:description 
    xmlns:x="http://www.jenitennison.com/xslt/xspec"
    xmlns:db="http://docbook.org/ns/docbook"
    stylesheet="docbook_to_dvpml_block.xslt">
  <x:scenario label="Sections">
    <x:context mode="content">
      <db:section>
        <db:title>Main section</db:title>
        <db:section>
          <db:title>Subsection</db:title>
        </db:section>
      </db:section>
    </x:context>
    <x:expect label="Numbering">
      <section id="I">
        <title>Main section</title>
        <section id="I.1">
          <title>Subsection</title>
        </section>
      </section>
    </x:expect>
  </x:scenario>
  <x:scenario label="Sections with titles in info">
    <x:context mode="content">
      <db:section>
        <db:info>
          <db:title>Main section</db:title>
        </db:info>
        <db:section>
          <db:info>
            <db:title>Subsection</db:title>
          </db:info>
        </db:section>
      </db:section>
    </x:context>
    <x:expect label="Numbering">
      <section id="I">
        <title>Main section</title>
        <section id="I.1">
          <title>Subsection</title>
        </section>
      </section>
    </x:expect>
  </x:scenario>
  <x:scenario label="Sections with numbered tags">
    <x:context mode="content">
      <db:sect1>
        <db:title>Main section</db:title>
        <db:sect2>
          <db:title>Subsection</db:title>
        </db:sect2>
      </db:sect1>
    </x:context>
    <x:expect label="Numbering">
      <section id="I">
        <title>Main section</title>
        <section id="I.1">
          <title>Subsection</title>
        </section>
      </section>
    </x:expect>
  </x:scenario>
  <x:scenario label="Sections with IDs">
    <x:context mode="content">
      <db:section xml:id="main-section">
        <db:title>Main section</db:title>
        <db:section xml:id="subsection">
          <db:title>Subsection</db:title>
        </db:section>
      </db:section>
    </x:context>
    <x:expect label="Numbering">
      <section id="I">
        <title>Main section</title>
        <signet id="main-section"/>
        <section id="I.1">
          <title>Subsection</title>
          <signet id="subsection"/>
        </section>
      </section>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Informal CALS table">
    <x:context mode="content">
      <db:informaltable>
        <db:tgroup cols="2">
          <db:colspec colname="c1" colnum="1" colwidth="1*"/>
          <db:colspec colname="c2" colnum="2" colwidth="1*"/>
          <db:thead>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:thead>
          <db:tbody>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:tbody>
        </db:tgroup>
      </db:informaltable>
    </x:context>
    <x:expect label="Table">
      <tableau width="80%" border="1" sautDePagePdf="0">
        <entete>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Informal CALS table with width in pixels and border">
    <x:context mode="content">
      <db:informaltable width="500" border="5">
        <db:tgroup cols="2">
          <db:colspec colname="c1" colnum="1" colwidth="1*"/>
          <db:colspec colname="c2" colnum="2" colwidth="1*"/>
          <db:tbody>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:tbody>
        </db:tgroup>
      </db:informaltable>
    </x:context>
    <x:expect label="Table">
      <tableau width="500px" border="5" sautDePagePdf="0">
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Informal CALS table with width in percents">
    <x:context mode="content">
      <db:informaltable width="500%">
        <db:tgroup cols="2">
          <db:colspec colname="c1" colnum="1" colwidth="1*"/>
          <db:colspec colname="c2" colnum="2" colwidth="1*"/>
          <db:tbody>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:tbody>
        </db:tgroup>
      </db:informaltable>
    </x:context>
    <x:expect label="Table">
      <tableau width="500%" border="1" sautDePagePdf="0">
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Informal HTML table">
    <x:context mode="content">
      <db:informaltable>
        <db:col width="50%"/>
        <db:col width="50%"/>
        <db:thead>
          <db:tr>
            <db:th/>
            <db:th/>
          </db:tr>
        </db:thead>
        <db:tbody>
          <db:tr>
            <db:td/>
            <db:td/>
          </db:tr>
          <db:tr>
            <db:td/>
            <db:td/>
          </db:tr>
        </db:tbody>
      </db:informaltable>
    </x:context>
    <x:expect label="Table">
      <tableau width="80%" border="1" sautDePagePdf="0">
        <entete>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Informal HTML table with ID">
    <x:context mode="content">
      <db:informaltable xml:id="test-id">
        <db:col width="50%"/>
        <db:col width="50%"/>
        <db:thead>
          <db:tr>
            <db:th/>
            <db:th/>
          </db:tr>
        </db:thead>
        <db:tbody>
          <db:tr>
            <db:td/>
            <db:td/>
          </db:tr>
          <db:tr>
            <db:td/>
            <db:td/>
          </db:tr>
        </db:tbody>
      </db:informaltable>
    </x:context>
    <x:expect label="Table">
      <renvoi id="test-id"/>
      <tableau width="80%" border="1" sautDePagePdf="0">
        <entete>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Formal CALS table with ID">
    <x:context mode="content">
      <db:table xml:id="test-ID">
        <db:title>Table title</db:title>
        <db:tgroup cols="2">
          <db:colspec colname="c1" colnum="1" colwidth="1*"/>
          <db:colspec colname="c2" colnum="2" colwidth="1*"/>
          <db:thead>
            <db:row>
              <db:entry>H1</db:entry>
              <db:entry>H2</db:entry>
            </db:row>
          </db:thead>
          <db:tbody>
            <db:row>
              <db:entry>R11</db:entry>
              <db:entry>R12</db:entry>
            </db:row>
            <db:row>
              <db:entry>R21</db:entry>
              <db:entry>R22</db:entry>
            </db:row>
          </db:tbody>
        </db:tgroup>
      </db:table>
    </x:context>
    <x:expect label="Table">
      <renvoi id="test-ID"/>
      <tableau width="80%" border="1" sautDePagePdf="0" legende="Table title">
        <entete>
          <colonne useText="0">
            <paragraph>H1</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>H2</paragraph>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph>R11</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>R12</paragraph>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph>R21</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>R22</paragraph>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Formal HTML table">
    <x:context mode="content">
      <db:table>
        <db:title>Table title</db:title>
        <db:col width="50%"/>
        <db:col width="50%"/>
        <db:thead>
          <db:tr>
            <db:th>H1</db:th>
            <db:th>H2</db:th>
          </db:tr>
        </db:thead>
        <db:tbody>
          <db:tr>
            <db:td>R11</db:td>
            <db:td>R12</db:td>
          </db:tr>
          <db:tr>
            <db:td>R21</db:td>
            <db:td>R22</db:td>
          </db:tr>
        </db:tbody>
      </db:table>
    </x:context>
    <x:expect label="Table">
      <tableau width="80%" border="1" sautDePagePdf="0" legende="Table title">
        <entete>
          <colonne useText="0">
            <paragraph>H1</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>H2</paragraph>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph>R11</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>R12</paragraph>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph>R21</paragraph>
          </colonne>
          <colonne useText="0">
            <paragraph>R22</paragraph>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <!-- Excerpt from https://tdg.docbook.org/tdg/5.2/informalfigure.html -->
  <x:scenario label="Informal figure">
    <x:context mode="content">
      <db:informalfigure>
        <db:mediaobject>
          <db:imageobject condition="print">
            <db:info>
              <db:author>
                <db:personname>
                  <db:firstname>Norman</db:firstname>
                  <db:surname>Walsh</db:surname>
                </db:personname>
              </db:author>
              <db:pubdate>1998</db:pubdate>
            </db:info>
            <db:imagedata fileref="figs/print/db5d_ref10.pdf" format="PDF" role="keep-together"/>
          </db:imageobject>
          <db:imageobject condition="web">
            <db:imagedata fileref="figs/web/db5d_ref10.png" format="PNG"/>
          </db:imageobject>
          <db:textobject>
            <db:phrase>Wat Arun</db:phrase>
          </db:textobject>
          <db:caption><db:para>Wat Arun.</db:para></db:caption>
        </db:mediaobject>
      </db:informalfigure>
    </x:context>
    <x:expect label="Figure">
      <image src="figs/print/db5d_ref10.pdf"/>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Formal figure with ID">
    <x:context mode="content">
      <db:figure xml:id="test-id">
        <db:title>Wat Arun</db:title>
        <db:mediaobject>
          <db:imageobject condition="print">
            <db:info>
              <db:author>
                <db:personname>
                  <db:firstname>Norman</db:firstname>
                  <db:surname>Walsh</db:surname>
                </db:personname>
              </db:author>
              <db:pubdate>1998</db:pubdate>
            </db:info>
            <db:imagedata fileref="figs/print/db5d_ref10.pdf" format="PDF" role="keep-together"/>
          </db:imageobject>
          <db:imageobject condition="web">
            <db:imagedata fileref="figs/web/db5d_ref10.png" format="PNG"/>
          </db:imageobject>
          <db:textobject>
            <db:phrase>Wat Arun</db:phrase>
          </db:textobject>
          <db:caption><db:para>Wat Arun.</db:para></db:caption>
        </db:mediaobject>
      </db:figure>
    </x:context>
    <x:expect label="Figure">
      <signet id="test-id"/>
      <image src="figs/print/db5d_ref10.pdf" legende="Wat Arun"/>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Simple paragraph">
    <x:context mode="content">
      <db:para>Wat Arun.</db:para>
    </x:context>
    <x:expect label="Paragraph">
      <paragraph>Wat Arun.</paragraph>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="Paragraph with a table">
    <x:context mode="content">
      <db:para>Wat Arun.<db:informaltable>
        <db:tgroup cols="2">
          <db:colspec colname="c1" colnum="1" colwidth="1*"/>
          <db:colspec colname="c2" colnum="2" colwidth="1*"/>
          <db:thead>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:thead>
          <db:tbody>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
            <db:row>
              <db:entry/>
              <db:entry/>
            </db:row>
          </db:tbody>
        </db:tgroup>
      </db:informaltable></db:para>
    </x:context>
    <x:expect label="Paragraph with table afterwards" select="/*">
      <paragraph>Wat Arun.</paragraph>
      <tableau width="80%" border="1" sautDePagePdf="0">
        <entete>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </entete>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
        <ligne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
          <colonne useText="0">
            <paragraph/>
          </colonne>
        </ligne>
      </tableau>
    </x:expect>
  </x:scenario>
  
  <!-- No test for blockquote, no decent implementation. -->
</x:description>
